{"version":3,"sources":["../../../src/app/jobs/CancellationMail.js"],"names":["CancellationMail","data","appointment","Mail","sendMail","to","provider","name","email","subject","template","context","user","date","locale","pt"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;;;AACA;;;;;;IAEMA,gB;;;;;;;;;YAKWC,I,QAAAA,I;;;;;;AACLC,2B,GAAgBD,I,CAAhBC,W;;uBAEFC,eAAKC,QAAL,CAAc;AAClBC,sBAAOH,YAAYI,QAAZ,CAAqBC,IAA5B,UAAqCL,YAAYI,QAAZ,CAAqBE,KAA1D,MADkB;AAElBC,2BAAS,uBAFS;AAGlBC,4BAAU,cAHQ;AAIlBC,2BAAS;AACPL,8BAAUJ,YAAYI,QAAZ,CAAqBC,IADxB;AAEPK,0BAAMV,YAAYU,IAAZ,CAAiBL,IAFhB;AAGPM,0BAAM,qBACJ,uBAASX,YAAYW,IAArB,CADI,EAEJ,4BAFI,EAGJ;AACEC,8BAAQC;AADV,qBAHI;AAHC;AAJS,iBAAd,C;;;;;;;;;;;;;;;;;;wBAPE;AACR,aAAO,kBAAP;AACD;;;;;kBAuBY,IAAIf,gBAAJ,E","file":"CancellationMail.js","sourcesContent":["import { format, parseISO } from 'date-fns';\nimport pt from 'date-fns/locale/pt';\nimport Mail from '../../lib/Mail';\n\nclass CancellationMail {\n  get key() {\n    return 'CancellationMail';\n  }\n\n  async handle({ data }) {\n    const { appointment } = data;\n\n    await Mail.sendMail({\n      to: `${appointment.provider.name} <${appointment.provider.email}>`,\n      subject: 'Agendamento cancelado',\n      template: 'cancellation',\n      context: {\n        provider: appointment.provider.name,\n        user: appointment.user.name,\n        date: format(\n          parseISO(appointment.date),\n          \"dd 'de' MMMM', Ã s' H:mm'h'\",\n          {\n            locale: pt,\n          }),\n      }\n    });\n  }\n}\n\nexport default new CancellationMail();\n"]}