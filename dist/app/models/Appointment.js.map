{"version":3,"sources":["../../../src/app/models/Appointment.js"],"names":["Appointment","sequelize","date","Sequelize","DATE","canceled_at","past","type","VIRTUAL","get","Date","cancelable","underscored","models","belongsTo","User","foreignKey","as","Model"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;IAEMA,W;;;;;;;;;;yBACQC,S,EAAW;AACrB,uHAAW;AACTC,cAAMC,oBAAUC,IADP;AAETC,qBAAaF,oBAAUC,IAFd;AAGTE,cAAM;AACJC,gBAAMJ,oBAAUK,OADZ;AAEJC,aAFI,iBAEE;AACJ,mBAAO,uBAAS,KAAKP,IAAd,EAAoB,IAAIQ,IAAJ,EAApB,CAAP;AACD;AAJG,SAHG;AASTC,oBAAY;AACVJ,gBAAMJ,oBAAUK,OADN;AAEVC,aAFU,iBAEJ;AACJ,mBAAO,uBAAS,IAAIC,IAAJ,EAAT,EAAqB,uBAAS,KAAKR,IAAd,EAAoB,CAApB,CAArB,CAAP;AACD;AAJS;AATH,OAAX,EAeG;AACDD,4BADC;AAEDW,qBAAa;AAFZ,OAfH;;AAoBA,aAAO,IAAP;AACD;;;8BAEgBC,M,EAAQ;AACvB,WAAKC,SAAL,CAAeD,OAAOE,IAAtB,EAA4B,EAAEC,YAAY,SAAd,EAAyBC,IAAI,MAA7B,EAA5B;AACA,WAAKH,SAAL,CAAeD,OAAOE,IAAtB,EAA4B,EAAEC,YAAY,aAAd,EAA6BC,IAAI,UAAjC,EAA5B;AACD;;;EA5BuBC,gB;;kBA+BXlB,W","file":"Appointment.js","sourcesContent":["import Sequelize, { Model } from 'sequelize';\nimport { isBefore, subHours } from 'date-fns';\n\nclass Appointment extends Model {\n  static init(sequelize) {\n    super.init({\n      date: Sequelize.DATE,\n      canceled_at: Sequelize.DATE,\n      past: {\n        type: Sequelize.VIRTUAL,\n        get() {\n          return isBefore(this.date, new Date());\n        },\n      },\n      cancelable: {\n        type: Sequelize.VIRTUAL,\n        get() {\n          return isBefore(new Date(), subHours(this.date, 2));\n        },\n      }\n    }, {\n      sequelize,\n      underscored: true\n    });\n\n    return this;\n  }\n\n  static associate(models) {\n    this.belongsTo(models.User, { foreignKey: 'user_id', as: 'user' });\n    this.belongsTo(models.User, { foreignKey: 'provider_id', as: 'provider' });\n  }\n}\n\nexport default Appointment;\n"]}