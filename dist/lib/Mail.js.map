{"version":3,"sources":["../../src/lib/Mail.js"],"names":["Mail","host","mailConfig","port","secure","auth","transporter","nodemailer","createTransport","user","configureTemplates","viewPath","__dirname","use","viewEngine","exphbs","create","layoutsDir","partialsDir","defaultLayout","extname","extName","message","sendMail","default"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;AACA;;;;AACA;;;;AAEA;;;;;;IAGMA,I;AACJ,kBAAc;AAAA;AAAA,QACJC,IADI,GACyBC,cADzB,CACJD,IADI;AAAA,QACEE,IADF,GACyBD,cADzB,CACEC,IADF;AAAA,QACQC,MADR,GACyBF,cADzB,CACQE,MADR;AAAA,QACgBC,IADhB,GACyBH,cADzB,CACgBG,IADhB;;;AAGZ,SAAKC,WAAL,GAAmBC,qBAAWC,eAAX,CAA2B;AAC5CP,gBAD4C;AAE5CE,gBAF4C;AAG5CC,oBAH4C;AAI5CC,YAAMA,KAAKI,IAAL,GAAYJ,IAAZ,GAAmB;AAJmB,KAA3B,CAAnB;;AAOA,SAAKK,kBAAL;AACD;;;;yCAEoB;AACnB,UAAMC,WAAW,mBAAQC,SAAR,EAAmB,IAAnB,EAAyB,KAAzB,EAAgC,OAAhC,EAAyC,OAAzC,CAAjB;;AAEA,WAAKN,WAAL,CAAiBO,GAAjB,CACE,SADF,EAEE,2CAAc;AACZC,oBAAYC,4BAAOC,MAAP,CAAc;AACxBC,sBAAY,mBAAQN,QAAR,EAAkB,SAAlB,CADY;AAExBO,uBAAa,mBAAQP,QAAR,EAAkB,UAAlB,CAFW;AAGxBQ,yBAAe,SAHS;AAIxBC,mBAAS;AAJe,SAAd,CADA;AAOZT,0BAPY;AAQZU,iBAAS;AARG,OAAd,CAFF;AAYD;;;6BAEQC,O,EAAS;AAChB,aAAO,KAAKhB,WAAL,CAAiBiB,QAAjB,4BACFrB,eAAWsB,OADT,EAEFF,OAFE,EAAP;AAID;;;;;kBAGY,IAAItB,IAAJ,E","file":"Mail.js","sourcesContent":["import nodemailer from 'nodemailer';\nimport { resolve } from 'path';\nimport exphbs from 'express-handlebars';\nimport nodemailerhbs from 'nodemailer-express-handlebars';\n\nimport mailConfig from '../config/mail';\n\n\nclass Mail {\n  constructor() {\n    const { host, port, secure, auth } = mailConfig;\n\n    this.transporter = nodemailer.createTransport({\n      host,\n      port,\n      secure,\n      auth: auth.user ? auth : null,\n    });\n\n    this.configureTemplates();\n  }\n\n  configureTemplates() {\n    const viewPath = resolve(__dirname, '..', 'app', 'views', 'mails');\n\n    this.transporter.use(\n      'compile',\n      nodemailerhbs({\n        viewEngine: exphbs.create({\n          layoutsDir: resolve(viewPath, 'layouts'),\n          partialsDir: resolve(viewPath, 'partials'),\n          defaultLayout: 'default',\n          extname: '.hbs'\n        }),\n        viewPath,\n        extName: '.hbs'\n      }));\n  }\n\n  sendMail(message) {\n    return this.transporter.sendMail({\n      ...mailConfig.default,\n      ...message,\n    });\n  }\n}\n\nexport default new Mail();\n"]}